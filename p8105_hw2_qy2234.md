p8105\_hw2\_qy2234
================
Michael Yan
9/25/2019

## Problem 1

``` r
## load the tidyverse and readxl package
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────────────────── tidyverse 1.2.1 ──

    ## ✔ ggplot2 3.2.1     ✔ purrr   0.3.2
    ## ✔ tibble  2.1.3     ✔ dplyr   0.8.3
    ## ✔ tidyr   1.0.0     ✔ stringr 1.4.0
    ## ✔ readr   1.3.1     ✔ forcats 0.4.0

    ## ── Conflicts ────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library(readxl)

## specify the sheet in the Excel file and to omit non-data entries
tw_data = 
  read_excel(
  "./P1_data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = 1) %>%
  janitor::clean_names() %>% 
  select(-x15) %>% 
  drop_na(dumpster) %>%
  select(dumpster, month, year, everything()) %>% 
  mutate(sports_balls = round(sports_balls, digits = 0)) %>% 
  mutate(sports_balls = as.integer(sports_balls))
```

    ## New names:
    ## * `` -> ...15

``` r
## read and clean precipitation data for 2017 and 2018

## clear 2017 data
tw_data_17 = read_excel(
  "./P1_data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", 
  sheet = 4, skip = 1) %>%
  janitor::clean_names() %>% 
  drop_na(total) %>% 
  mutate(year = "2017") %>% 
  rename(percipitation_in_in = total)

## clear 2018 data
tw_data_18 = read_excel(
  "./P1_data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", 
  sheet = 3, skip = 1) %>%
  janitor::clean_names() %>% 
  drop_na(total) %>% 
  mutate(year = "2018") %>% 
  rename(percipitation_in_in = total)

## combine 2017 2018 data
tw_data_17_18 = 
  left_join(tw_data_17, tw_data_18, by = "month") %>% 
  drop_na(month) %>%
  mutate(month = month.name)
```

#### Question\_one\_description

  - The number of observations in tw\_data is 285
  - The number of observations in tw\_data\_17\_18 is 12
  - Some key variables in tw-data include dumpster, month, and year
  - Some key variables in tw\_data\_17\_18 include month, year
  - The total precipitation in 2018 is 23.5
  - The median number of sports balls in a dumpster in 2017 is 143

## Problem 2

``` r
## load the tidyverse and readxl package
library(tidyverse)
library(readxl)

## clean the data in pols-month.csv
pols_month_data = read_csv(
  "./P2_data/fivethirtyeight_datasets/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, c("year", "month", "day"), convert = TRUE) %>% 
  mutate(month = month.abb[month]) %>% 
  mutate(month = str_to_lower(month)) %>% 
  pivot_longer(gov_gop:rep_gop, 
               names_to = "gop_groups",
               values_to = "count_gop") %>% 
  pivot_longer(gov_dem:rep_dem, 
               names_to = "dem_groups",
               values_to = "count_dem") %>% 
  pivot_longer(prez_gop:prez_dem, 
               names_to = "president",
               values_to = "prez_gop_or_dem") %>% 
  select(-president, -day) %>% 
  rename(president = prez_gop_or_dem)
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

``` r
## clean the data in snp.csv
snp_data = read_csv(
  "./P2_data/fivethirtyeight_datasets/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate(date, c("month", "day", "year"), convert = TRUE) %>% 
  mutate(month = month.abb[month]) %>% 
  mutate(month = str_to_lower(month)) %>%
  arrange(year, month) %>% 
  select(year, month, day, close)
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
## clean the data in unemployment.csv
unemployment_data = read_csv(
  "./P2_data/fivethirtyeight_datasets/unemployment.csv") %>%
  janitor::clean_names() %>% 
  pivot_longer(
    jan:dec,
    names_to = "month", 
    values_to = "unemployment") 
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

``` r
## join the datasets by merging snp into pols, and merging unemployment into the result
pols_snp = 
  left_join(pols_month_data, snp_data, by = "year")
pols_snp_unemployment = 
  left_join(pols_snp, unemployment_data, by = "year")
```

Write a short paragraph about these datasets. Explain briefly what each
dataset contained, and describe the resulting dataset (e.g. give the
dimension, range of years, and names of key variables).

#### Question\_two\_description

  - The pols\_month\_data contains the number of governors, senators,
    and representatives from both parties at a given time. The snp\_data
    provides the closing values of the S\&P stock index on the
    associated date. The unemployment\_data shows the percentage of
    unemployment in each month of the associated year. Finally, the
    pols\_snp\_unemployment dataset gives us a view of all the
    information associate with a given time point, including the number
    of governors, senators, and representatives from both parties, the
    S\&P stock index, and the percentage of unemployment. It also gives
    us the information about when the measurements were done (which
    month, or day, if applicabel).

The dimension of the final resulting dataset is 2036232 by 12

The range of years is 1947 - 2015

The names of key variables include year and month
